{"version":3,"sources":["../src/genactions.js"],"names":["pluralize","require","capitalize","snakeToCamel","module","exports","context","actionObj","console","warn","action","alias","funcNameBase","name","pathPrefix","lastSlashPos","lastIndexOf","substr","capitalizedAction","pluralizedAction","plural","funcs","arg","fullQualifiedActionName","$store","_actions","dispatch","id","params","$axios","get","config","payload","Object","assign","post","put","delete"],"mappings":"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","file":"genactions.js","sourcesContent":["const pluralize = require('pluralize')\nconst {capitalize, snakeToCamel} = require('./utils')\n\nmodule.exports = function (context, actionObj) {\n  if (!context) {\n    console.warn('[nuxtend] genactions: conext is not passed.')\n    return {}\n  }\n  let action = '' \n  let alias = null\n  let funcNameBase = ''\n  if (typeof actionObj === 'string') {\n    action = actionObj\n  } else {\n    action = actionObj.name\n    if (actionObj.alias) {\n      alias = actionObj.alias\n    }\n  }\n  if (!action) {\n    console.warn('[nuxtend] genactions: action is not passed.')\n    return {}\n  }\n  let pathPrefix = ''\n  let lastSlashPos = action.lastIndexOf('/')\n  if (lastSlashPos === -1) {\n    funcNameBase = action\n  } else {\n    pathPrefix = action.substr(0, lastSlashPos + 1)\n    funcNameBase = action.substr(lastSlashPos + 1)\n  }\n  const capitalizedAction = capitalize(snakeToCamel(funcNameBase))\n  const pluralizedAction = pluralize.plural(funcNameBase)\n  const funcs = {}\n\n  // usage example: this.getUser(123) or this.getUser({id: 123, params: {status=sleeping}})\n  funcs[`get${capitalizedAction}`] = function (arg) {\n    const fullQualifiedActionName = `${pathPrefix}${pluralizedAction}/get`\n    if (typeof this.$store._actions[fullQualifiedActionName] !== 'undefined') {\n      return this.$store.dispatch(fullQualifiedActionName, arg)\n    } else {\n      let id = arg\n      let params = null\n      if (typeof arg === 'object') {\n        id = arg.id\n        params = arg.params\n      }\n      return this.$axios.get(`/${pathPrefix}${pluralizedAction}/${id}`, {params})\n    }\n  }\n\n  funcs[`get${capitalizedAction}List`] = function (config) {\n    const fullQualifiedActionName = `${pathPrefix}${pluralizedAction}/getList`\n    if (typeof this.$store._actions[fullQualifiedActionName] !== 'undefined') {\n      return this.$store.dispatch(fullQualifiedActionName, config)\n    } else {\n      return this.$axios.get(`/${pathPrefix}${pluralizedAction}`, config)\n    }\n  }\n\n  funcs[`post${capitalizedAction}`] = function (arg, config) {\n    const fullQualifiedActionName = `${pathPrefix}${pluralizedAction}/create`\n    if (typeof this.$store._actions[fullQualifiedActionName] !== 'undefined') {\n      const payload = Object.assign({}, arg, {config})\n      return this.$store.dispatch(fullQualifiedActionName, payload)\n    } else {\n      return this.$axios.post(`/${pathPrefix}${pluralizedAction}`, arg, config)\n    }\n  }\n\n  funcs[`put${capitalizedAction}`] = function (arg, config) {\n    const fullQualifiedActionName = `${pathPrefix}${pluralizedAction}/update`\n    if (typeof this.$store._actions[fullQualifiedActionName] !== 'undefined') {\n      const payload = Object.assign({}, arg, {config})\n      return this.$store.dispatch(fullQualifiedActionName, payload)\n    } else {\n      let id = arg\n      let params = null\n      let config = null\n      if (typeof arg === 'object') {\n        id = arg.id\n        params = arg\n      }\n      return this.$axios.put(`/${pathPrefix}${pluralizedAction}/${id}`, params, config)\n    }\n  }\n\n  funcs[`delete${capitalizedAction}`] = function (arg, config) {\n    const fullQualifiedActionName = `${pathPrefix}${pluralizedAction}/delete`\n    if (typeof this.$store._actions[fullQualifiedActionName] !== 'undefined') {\n      const payload = Object.assign({}, arg, {config})\n      return this.$store.dispatch(fullQualifiedActionName, payload)\n    } else {\n      let id = arg\n      let params = null\n      if (typeof arg === 'object') {\n        id = arg.id\n      }\n      return this.$axios.delete(`/${pathPrefix}${pluralizedAction}/${id}`, config)\n    }\n  }\n\n  return funcs\n}\n"]}